"use strict";document.addEventListener("DOMContentLoaded",function(){function i(){var t=document.querySelectorAll(".close-item");null!==t&&0<t.length&&t.forEach(function(t){t.addEventListener("click",function(t){t.stopPropagation(),null!=A&&(t=t.target.closest("li"),console.log(t),t.remove(),0===(t=document.querySelectorAll(".basket-item")).length?(A.style.display="none",E.classList.add("close-notification"),setTimeout(function(){E.classList.remove("show-notification"),E.classList.remove("close-notification")},1e3),E.textContent=""):0!==t.length&&(E.textContent=t.length,10<=t.length)&&(E.textContent="9+"))})})}function e(t){var e=(t=t.target.closest("li")).querySelector("img"),o=t.querySelector(".title"),t=t.querySelector(".price"),c=(f.classList.add("active-price-box"),e.src),o=o.textContent,e=e.alt;L.src=c,L.alt=e,b.textContent=o,g.textContent=t.textContent}function o(t){13===t.keyCode&&console.log("ok")}var t=document.querySelector("body"),c=document.querySelector(".search"),n=document.querySelector(".search-btn"),s=document.querySelector(".buy"),a=document.querySelector(".buy-box"),l=document.querySelector(".toggle-sidebar"),r=document.querySelector(".sidebar"),d=r.querySelector(".show-more-box"),u=document.querySelectorAll(".products"),m=document.querySelectorAll(".show-more"),y=document.querySelector(".shopping-card"),f=document.querySelector(".price-box"),v=document.querySelector(".close"),L=document.querySelector(".price-img"),g=document.querySelector(".money"),b=document.querySelector(".iphone-name"),h=document.querySelectorAll(".back-arrow"),p=document.querySelectorAll(".favorite"),q=r.querySelector(".arrow"),S=r.querySelector(".slider"),k=r.querySelector(".theme-text"),x=r.querySelector(".change-theme"),E=document.querySelector(".notification"),C=document.querySelector(".fav-notification"),A=document.querySelector(".basket-box"),T=document.querySelector(".basket-container"),w=document.querySelectorAll(".add-basket-btn"),z=document.querySelector(".favorite-card"),D=document.querySelector(".favorite-box"),M=document.querySelector(".fav-container");c.addEventListener("keyup",function(t){var e=document.querySelectorAll(".product-name"),o=t.target.value.toLowerCase();e.forEach(function(t){-1!==t.textContent.toLowerCase().indexOf(o)?t.closest("li").style.display="flex":t.closest("li").style.display="none"})}),y.addEventListener("click",function(){"block"!==A.style.display&&setTimeout(function(){A.style.display="block"},1)}),w.forEach(function(t){t.addEventListener("click",function(t){var e,o,c,n,s=t.target.closest("li");console.log("dodano do koszyka"),setTimeout(function(){s.classList.remove("active-info-card")},1),t=(t=t).target.closest("li"),e=t.querySelector("img").src,o=t.querySelector("img").alt,c=t.querySelector(".price").textContent,t=t.querySelector(".product-name").textContent,(n=document.createElement("li")).classList.add("basket-item"),n.innerHTML='\n\t\t<button class="close-item"><i class="fa-solid fa-xmark"></i></button>\n\t\t<div class="basket-img-box">\n\t\t\t<img src="'.concat(e,'" alt="').concat(o,'" class="basket-img">\n\t\t\t<h3 class="basket-title">').concat(t,'</h3>\n\t\t</div>\n\t\t<div class="basket-price-box">\n\t\t\t\n\t\t\t<p class="basket-price">').concat(c,"</p>\n\t\t</div>\n\t\t"),T.appendChild(n),e=document.querySelectorAll(".basket-item"),i(),0===e.length?console.log("Dodaj zakupy do koszyka"):0<e.length&&(E.textContent=e.length,E.classList.add("show-notification"),E.classList.remove("close-notification"),10<=e.length)&&(E.textContent="+9")})}),a.addEventListener("click",function(){a.classList.add("buy-box-active")}),document.addEventListener("click",function(t){!a.classList.contains("buy-box-active")||t.target.closest(".close-item")||a.contains(t.target)||a.classList.remove("buy-box-active"),"block"!==A.style.display||A.contains(t.target)||(A.style.display="none"),"block"!==D.style.display||D.contains(t.target)||(D.style.display="none")}),h.forEach(function(t){t.addEventListener("click",function(t){var e=t.target.closest("li");e.classList.contains("active-info-card")&&setTimeout(function(){e.classList.remove("active-info-card")},1)})}),v.addEventListener("click",function(){f.classList.contains("active-price-box")&&(f.classList.add("close-price-box"),setTimeout(function(){f.classList.remove("active-price-box"),f.classList.remove("close-price-box")},500))}),m.forEach(function(t){t.addEventListener("click",e)}),u.forEach(function(e){e.addEventListener("click",function(t){t.target.closest("li").classList.contains("active-info-card")||e.classList.add("active-info-card")})}),z.addEventListener("click",function(t){"block"!==D.style.display&&setTimeout(function(){D.style.display="block"},1)}),p.forEach(function(i){i.addEventListener("click",function(t){var e,o,c,n,s=t.target.closest("li"),t=(s.classList.contains("added-to-fav")||(s.classList.add("added-to-fav"),t=s.querySelector("img").src,n=s.querySelector("img").alt,e=s.querySelector(".price").textContent,o=s.querySelector(".product-name").textContent,(c=document.createElement("li")).classList.add("fav-li"),c.innerHTML='\n\t\t\t<button class="close-item"><i class="fa-solid fa-xmark"></i></button>\n\t    \t\t<div class="fav-img-box">\n\t       \t\t\t<img src="'.concat(t,'" alt="').concat(n,'" class="fav-img">\n\n\t        \t\t<h3 class="fav-title">').concat(o,'</h3>\n\t   \t\t\t</div>\n\n\t    \t\t<div class="fav-price-box">\n\t             \t<p class="fav-price">').concat(e,"</p>\n\t    \t\t</div>\n\t\t\t"),M.appendChild(c)),document.querySelectorAll(".fav-li"));null!==(n=document.querySelectorAll(".close-item"))&&0<n.length&&n.forEach(function(t){t.addEventListener("click",function(t){var c;t.stopPropagation(),D&&(c=t.target.closest("li"),document.querySelectorAll(".product-name").forEach(function(t){var e=c.querySelector(".fav-title"),o=t.textContent,t=t.closest("li");t.classList.contains("added-to-fav")&&e.textContent===o&&((e=t.querySelector(".favorite"))&&e.classList.remove("added-to-favorite"),c.remove(),t.classList.remove("added-to-fav"))}),0===(t=document.querySelectorAll(".fav-li")).length?(D.style.display="none",C.classList.add("close-notification"),setTimeout(function(){C.classList.remove("show-notification"),C.classList.remove("close-notification")},1e3),C.textContent=""):0!==t.length&&(C.textContent=t.length,10<=t.length)&&(C.textContent="9+"),console.log("ok"))})}),i.classList.add("added-to-favorite"),0===t.length?console.log("Dodaj do ulubionych"):0<t.length&&(C.textContent=t.length,C.classList.add("show-notification"),C.classList.remove("close-notification"),10<=t.length)&&(C.textContent="+9"),setTimeout(function(){s.classList.remove("active-info-card")},1)})}),S.addEventListener("click",function(){"light"===t.getAttribute("data-mode")?(t.setAttribute("data-mode","dark"),x.classList.add("slider-active")):(t.setAttribute("data-mode","light"),x.classList.remove("slider-active"))}),l.addEventListener("click",function(){r.classList.toggle("sidebar-active"),r.classList.contains("sidebar-active")?(d.style.display="flex",q.style.transform="rotate(180deg)",setTimeout(function(){k.style.opacity="1"},300)):(q.style.transform="rotate(0deg)",setTimeout(function(){d.style.display="none"},300),k.style.opacity="0")}),s.addEventListener("click",function(){c.classList.contains("search-active")&&(c.classList.remove("search-active"),c.classList.add("search-close"),setTimeout(function(){c.classList.remove("search-close")},500))}),c.addEventListener("keyup",function(t){o(t)}),n.addEventListener("click",function(){""!==c.value&&""===c.value||c.classList.add("search-active")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXRBbGxFbGVtZW50c0luQmFza2V0IiwiY2xvc2VMaSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJmb3JFYWNoIiwiYnRuIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImJhc2tldCIsImNsb3Nlc3RMaSIsInRhcmdldCIsImNsb3Nlc3QiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlIiwicHJpY2VCb3giLCJjb250YWlucyIsInNldFRpbWVvdXQiLCJkaXNwbGF5Iiwibm90aWZpY2F0aW9uIiwiY2xhc3NMaXN0Iiwic2hvd1ByaWNlQm94IiwicXVlcnlTZWxlY3RvciIsImltZ1NyYyIsInRpdGxlVGV4dCIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJzZWFyY2giLCJiYXNrZXRPZmZTZWFyY2giLCJpbWciLCJzcmMiLCJzaWRlYmFyQWN0aXZlIiwiYWx0IiwicHJpY2VJbWciLCJzaWRlYmFyIiwic2hvd01vcmVCb3giLCJpbWdBbHQiLCJpcGhvbmVOYW1lIiwic3R5bGUiLCJtb25leSIsInByaWNlIiwiZW50ZXJDaGVjayIsImFkZEl0ZW1Ub0Jhc2tldCIsImJvZHkiLCJiYXNrZXRCb3giLCJhY3RpdmVTaWRlYmFyIiwicHJvZHVjdHMiLCJzaG9wcGluZ0NhcmRCdG4iLCJjbG9zZSIsImJhY2tBcnJvdyIsImFycm93Iiwic2xpZGVyIiwidGhlbWVUZXh0IiwiY2hhbmdlVGhlbWVCdG4iLCJmYXZOb3RpZmljYXRpb24iLCJiYXNrZXRDb250YWluZXIiLCJhZGRCYXNrZXRCdG4iLCJzaG93RmF2Qm94QnRuIiwiZmF2Q29udGFpbmVyIiwic2VhcmNoRW5naW5lIiwic2VhcmNoaW5nTmFtZSIsInRvTG93ZXJDYXNlIiwidGV4dCIsImVsIiwidmFsdWUiLCJpbmRleE9mIiwiYWN0aXZlQnV5V2luZG93Iiwic2hvd0ZhdkJveCIsImZhdkJveCIsImFkZEJ0biIsImFsbExpSW5CYXNrZXQiLCJiYWNrTGkiLCJuZXdMaSIsImFwcGVuZENoaWxkIiwiY3JlYXRlRWxlbWVudCIsImNsb3Nlc3RBbHQiLCJjb25jYXQiLCJjbG9zZXN0TmFtZSIsInRhcmdldENsaWNrZWQiLCJhbGxQcm9kdWN0IiwibmFtZXMiLCJmYXZFbGVtZW50IiwiZmF2RWxlbWVudE5hbWUiLCJhbGxMaSIsInByb2R1Y3QiLCJhZGQiLCJjbG9zZXN0SW1nIiwibmV3RmF2IiwiaXRlbSIsImFsbEZhdkxpIiwiZ2V0QWxsRWxlbWVudHNJbkZhdiIsInNlYXJjaEZ1bmN0aW90biIsInNob3dNb3JlQnRuQ2FyZCIsImFkZFRvRmF2b3JpdGVCdG4iLCJjbG9zZXN0UHJpY2UiLCJpbm5lckhUTUwiLCJhbGxOYW1lcyIsImJ1dHRvbkVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJ0cmFuc2Zvcm0iLCJzZXRBdHRyaWJ1dGUiLCJ0b2dnbGUiLCJvcGFjaXR5IiwibmF2QnRuIl0sIm1hcHBpbmdzIjoiYUFBQUEsU0FBU0MsaUJBQWlCLG1CQUFvQixXQTRNekMsU0FsQ0VDLElBQ0wsSUFBTUMsRUFrQ0hILFNBQUFJLGlCQUFBLGFBQUEsRUFDQSxPQWxDQ0QsR0FrQ0QsRUFBQUEsRUFBQUUsUUFqQ0ZGLEVBa0NFRyxRQUFBLFNBQUFDLEdBakNEQSxFQUFJTixpQkFrQ0gsUUFBQSxTQUFBTyxHQWpDQUEsRUFBRUMsZ0JBa0NGLEVBaENJQyxNQUFBQSxJQXFDUEMsRUFER0gsRUFBQUksT0FDSEMsUUFBQSxJQUFBLEVBQ0FDLFFBQUFDLElBQUFKLENBQUEsRUFqQ0lBLEVBQVVLLE9BQU8sRUFxQ0csS0FEcEJDLEVBQW1CQyxTQUFTZCxpQkFBa0IsY0FBRyxHQUNsQ0MsUUFDbEJjLEVBQUFBLE1BQVdDLFFBQU0sT0FqQ2JDLEVBa0NNQyxVQUFVTixJQUFPLG9CQUFtQixFQUU3Q0csV0FBTSxXQUNSRSxFQUFBQyxVQUFBTixPQUFBLG1CQUFBLEVBQ0FLLEVBQUFDLFVBQUFOLE9BQUEsb0JBQUEsQ0FFS08sRUFBQUEsR0FBQUEs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bERyQkMsV0FtRENBLFdBbERBa0IsRUFtRE9HLE1BQUNsQixRQUFVTixNQWxEbkIsRUFBRyxHQW1ERCxFQUdIc0MsRUFBQ2QsTUFBQWdFLFFBQUEsSUFqREYsQ0FxSXFELEVBQ3JEQyxFQUFPeEcsaUJBQWlCLFFBcEh0QixXQUVGRCxFQUFTQyxVQUFBQSxTQUFpQixlQUFVTyxJQS9DbENxQixFQWdER2lCLFVBQVV4QixPQUFTLGVBQVUsRUEvQ2hDTyxFQWdESVAsVUFBVVQsSUFBQUEsY0FBUSxFQTlDdEJNLFdBZ0RBLFdBQ0RVLEVBQUFQLFVBQUFOLE9BQUEsY0FBQSxDQS9DQyxFQWlERCxHQUFJTixFQS9DTCxDQTBKZ0QsRUFDaERtQixFQUFPNUIsaUJBQWlCLFFBaklMVyxTQUFBQSxHQTVDbEIrQixFQTZDUW5DLENBQUNPLENBNUNWLENBNEtnRCxFQUNoRFIsRUFBSU4saUJBQWlCLFFBeElwQixXQUNELEtBQUE0QixFQUFBcUMsT0FBQSxLQUFBckMsRUFBQXFDLE9BQ0FyQyxFQUFPNUIsVUFBQUEsSUFBQUEsZUFBMEI0RCxDQTNDakMsQ0FpTDBDLENBQzNDLENBQUMiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcblx0Y29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHRjb25zdCBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoJyk7XHJcblx0Y29uc3QgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1idG4nKTtcclxuXHRjb25zdCBuYXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV5Jyk7XHJcblx0Y29uc3QgYmFza2V0Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1eS1ib3gnKTtcclxuXHQvLyBjb25zdCBpY29uc0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pY29uJyk7XHJcblx0Y29uc3QgYWN0aXZlU2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b2dnbGUtc2lkZWJhcicpO1xyXG5cdGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZWJhcicpO1xyXG5cdGNvbnN0IHNob3dNb3JlQm94ID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuc2hvdy1tb3JlLWJveCcpO1xyXG5cdGNvbnN0IHByb2R1Y3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3RzJyk7XHJcblx0Y29uc3Qgc2hvd01vcmVCdG5DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNob3ctbW9yZScpO1xyXG5cdGNvbnN0IHNob3BwaW5nQ2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaG9wcGluZy1jYXJkJyk7XHJcblxyXG5cdGNvbnN0IHByaWNlQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaWNlLWJveCcpO1xyXG5cdGNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNsb3NlJyk7XHJcblx0Y29uc3QgcHJpY2VJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpY2UtaW1nJyk7XHJcblx0Y29uc3QgbW9uZXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9uZXknKTtcclxuXHRjb25zdCBpcGhvbmVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlwaG9uZS1uYW1lJyk7XHJcblx0Y29uc3QgYmFja0Fycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhY2stYXJyb3cnKTtcclxuXHRjb25zdCBhZGRUb0Zhdm9yaXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhdm9yaXRlJyk7XHJcblxyXG5cdGNvbnN0IGFycm93ID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuYXJyb3cnKTtcclxuXHQvLyBjb25zdCB0aXRsZSA9IHNpZGViYXIucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XHJcblx0Y29uc3Qgc2xpZGVyID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyJyk7XHJcblx0Y29uc3QgdGhlbWVUZXh0ID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcudGhlbWUtdGV4dCcpO1xyXG5cdGNvbnN0IGNoYW5nZVRoZW1lQnRuID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlLXRoZW1lJyk7XHJcblx0Y29uc3Qgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGlmaWNhdGlvbicpO1xyXG5cdGNvbnN0IGZhdk5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXYtbm90aWZpY2F0aW9uJyk7XHJcblxyXG5cdGNvbnN0IGJhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXQtYm94Jyk7XHJcblx0Y29uc3QgYmFza2V0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhc2tldC1jb250YWluZXInKTtcclxuXHRjb25zdCBhZGRCYXNrZXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWRkLWJhc2tldC1idG4nKTtcclxuXHJcblx0Y29uc3Qgc2hvd0ZhdkJveEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXZvcml0ZS1jYXJkJyk7XHJcblx0Y29uc3QgZmF2Qm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhdm9yaXRlLWJveCcpO1xyXG5cdGNvbnN0IGZhdkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mYXYtY29udGFpbmVyJyk7XHJcblxyXG5cdGNvbnN0IHNlYXJjaEVuZ2luZSA9IChlKSA9PiB7XHJcblx0XHRjb25zdCBzZWFyY2hpbmdOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3QtbmFtZScpO1xyXG5cdFx0Y29uc3QgdGV4dCA9IGUudGFyZ2V0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0c2VhcmNoaW5nTmFtZS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0XHRpZiAoZWwudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKHRleHQpICE9PSAtMSkge1xyXG5cdFx0XHRcdGVsLmNsb3Nlc3QoJ2xpJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbC5jbG9zZXN0KCdsaScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdGNvbnN0IGFjdGl2ZUJ1eVdpbmRvdyA9ICgpID0+IHtcclxuXHRcdGlmIChiYXNrZXQuc3R5bGUuZGlzcGxheSAhPT0gJ2Jsb2NrJykge1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRiYXNrZXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0XHRcdH0sIDEpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNob3dGYXZCb3ggPSAoZSkgPT4ge1xyXG5cdFx0aWYgKGZhdkJveC5zdHlsZS5kaXNwbGF5ICE9PSAnYmxvY2snKSB7XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGZhdkJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHRcdFx0fSwgMSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgYWRkSXRlbVRvQmFza2V0ID0gKGUpID0+IHtcclxuXHRcdGNvbnN0IGNsb3Nlc3RMaSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XHJcblx0XHRjb25zdCBjbG9zZXN0SW1nID0gY2xvc2VzdExpLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNyYztcclxuXHRcdGNvbnN0IGNsb3Nlc3RBbHQgPSBjbG9zZXN0TGkucXVlcnlTZWxlY3RvcignaW1nJykuYWx0O1xyXG5cdFx0Y29uc3QgY2xvc2VzdFByaWNlID0gY2xvc2VzdExpLnF1ZXJ5U2VsZWN0b3IoJy5wcmljZScpLnRleHRDb250ZW50O1xyXG5cdFx0Y29uc3QgY2xvc2VzdE5hbWUgPSBjbG9zZXN0TGkucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtbmFtZScpLnRleHRDb250ZW50O1xyXG5cdFx0Y29uc3QgbmV3TGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cdFx0bmV3TGkuY2xhc3NMaXN0LmFkZCgnYmFza2V0LWl0ZW0nKTtcclxuXHJcblx0XHRuZXdMaS5pbm5lckhUTUwgPSBgXHJcblx0XHQ8YnV0dG9uIGNsYXNzPVwiY2xvc2UtaXRlbVwiPjxpIGNsYXNzPVwiZmEtc29saWQgZmEteG1hcmtcIj48L2k+PC9idXR0b24+XHJcblx0XHQ8ZGl2IGNsYXNzPVwiYmFza2V0LWltZy1ib3hcIj5cclxuXHRcdFx0PGltZyBzcmM9XCIke2Nsb3Nlc3RJbWd9XCIgYWx0PVwiJHtjbG9zZXN0QWx0fVwiIGNsYXNzPVwiYmFza2V0LWltZ1wiPlxyXG5cdFx0XHQ8aDMgY2xhc3M9XCJiYXNrZXQtdGl0bGVcIj4ke2Nsb3Nlc3ROYW1lfTwvaDM+XHJcblx0XHQ8L2Rpdj5cclxuXHRcdDxkaXYgY2xhc3M9XCJiYXNrZXQtcHJpY2UtYm94XCI+XHJcblx0XHRcdFxyXG5cdFx0XHQ8cCBjbGFzcz1cImJhc2tldC1wcmljZVwiPiR7Y2xvc2VzdFByaWNlfTwvcD5cclxuXHRcdDwvZGl2PlxyXG5cdFx0YDtcclxuXHJcblx0XHRiYXNrZXRDb250YWluZXIuYXBwZW5kQ2hpbGQobmV3TGkpO1xyXG5cdFx0Y29uc3QgYWxsTGlJbkJhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNrZXQtaXRlbScpO1xyXG5cdFx0Z2V0QWxsRWxlbWVudHNJbkJhc2tldCgpO1xyXG5cclxuXHRcdGlmIChhbGxMaUluQmFza2V0Lmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnRG9kYWogemFrdXB5IGRvIGtvc3p5a2EnKTtcclxuXHRcdH0gZWxzZSBpZiAoYWxsTGlJbkJhc2tldC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IGFsbExpSW5CYXNrZXQubGVuZ3RoO1xyXG5cdFx0XHRub3RpZmljYXRpb24uY2xhc3NMaXN0LmFkZCgnc2hvdy1ub3RpZmljYXRpb24nKTtcclxuXHRcdFx0bm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NlLW5vdGlmaWNhdGlvbicpO1xyXG5cclxuXHRcdFx0aWYgKGFsbExpSW5CYXNrZXQubGVuZ3RoID49IDEwKSB7XHJcblx0XHRcdFx0bm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gJys5JztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGdldEFsbEVsZW1lbnRzSW5GYXYgPSAoKSA9PiB7XHJcblx0XHRjb25zdCBjbG9zZUxpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlLWl0ZW0nKTtcclxuXHRcdGlmIChjbG9zZUxpICE9PSBudWxsICYmIGNsb3NlTGkubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjbG9zZUxpLmZvckVhY2goKGJ0bikgPT4ge1xyXG5cdFx0XHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpOyAvLyBaYXBvYmllZ25paiBixIViZWxrb3dhbml1IHpkYXJ6ZW5pYVxyXG5cclxuXHRcdFx0XHRcdGlmIChmYXZCb3gpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdGFyZ2V0Q2xpY2sgPSBlLnRhcmdldDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgdGFyZ2V0Q2xpY2tlZCA9IHRhcmdldENsaWNrLmNsb3Nlc3QoJ2xpJyk7XHJcblx0XHRcdFx0XHRcdC8vIGNvbnN0IGZhdkVsZW1lbnQgPSB0YXJnZXRDbGlja2VkLnF1ZXJ5U2VsZWN0b3IoJy5mYXYtdGl0bGUnKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWxsUHJvZHVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LW5hbWUnKTtcclxuXHJcblx0XHRcdFx0XHRcdGFsbFByb2R1Y3QuZm9yRWFjaCgobmFtZXMpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBmYXZFbGVtZW50ID0gdGFyZ2V0Q2xpY2tlZC5xdWVyeVNlbGVjdG9yKCcuZmF2LXRpdGxlJyk7IC8vIFByemVuaWVzaWVuaWUgd2V3bsSFdHJ6IHDEmXRsaVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZhdkVsZW1lbnROYW1lID0gZmF2RWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBhbGxOYW1lcyA9IG5hbWVzLnRleHRDb250ZW50O1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFsbExpID0gbmFtZXMuY2xvc2VzdCgnbGknKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0aWYgKGFsbExpLmNsYXNzTGlzdC5jb250YWlucygnYWRkZWQtdG8tZmF2JykpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChmYXZFbGVtZW50TmFtZS50ZXh0Q29udGVudCA9PT0gYWxsTmFtZXMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uRWxlbWVudCA9IGFsbExpLnF1ZXJ5U2VsZWN0b3IoJy5mYXZvcml0ZScpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGJ1dHRvbkVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUdXRhaiBtb8W8ZXN6IHd5a29ueXdhxIcgb3BlcmFjamUgbmEgZWxlbWVuY2llIGJ1dHRvbkVsZW1lbnRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FkZGVkLXRvLWZhdm9yaXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzdW5pxJljaWUgZWxlbWVudHUgbGlcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0Q2xpY2tlZC5yZW1vdmUoKTtcclxuXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzdW5pxJljaWUga2xhc3kgJ2FkZGVkLXRvLWZhdicgeiBlbGVtZW50dSBsaVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRhbGxMaS5jbGFzc0xpc3QucmVtb3ZlKCdhZGRlZC10by1mYXYnKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gU3ByYXdkxbosIGN6eSB3IGtvc3p5a3Ugc8SFIGplc3pjemUgZWxlbWVudHlcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IGFsbEZhdkxpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhdi1saScpO1xyXG5cdFx0XHRcdFx0XHRpZiAoYWxsRmF2TGkubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmF2Qm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdFx0XHRcdFx0ZmF2Tm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlLW5vdGlmaWNhdGlvbicpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGZhdk5vdGlmaWNhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93LW5vdGlmaWNhdGlvbicpO1xyXG5cdFx0XHRcdFx0XHRcdFx0ZmF2Tm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NlLW5vdGlmaWNhdGlvbicpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRmYXZOb3RpZmljYXRpb24udGV4dENvbnRlbnQgPSAnJztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhbGxGYXZMaS5sZW5ndGggIT09IDApIHtcclxuXHRcdFx0XHRcdFx0XHRmYXZOb3RpZmljYXRpb24udGV4dENvbnRlbnQgPSBhbGxGYXZMaS5sZW5ndGg7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmIChhbGxGYXZMaS5sZW5ndGggPj0gMTApIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZhdk5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9ICc5Kyc7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnb2snKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZ2V0QWxsRWxlbWVudHNJbkJhc2tldCA9ICgpID0+IHtcclxuXHRcdGNvbnN0IGNsb3NlTGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2xvc2UtaXRlbScpO1xyXG5cdFx0aWYgKGNsb3NlTGkgIT09IG51bGwgJiYgY2xvc2VMaS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNsb3NlTGkuZm9yRWFjaCgoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFphcG9iaWVnbmlqIGLEhWJlbGtvd2FuaXUgemRhcnplbmlhXHJcblxyXG5cdFx0XHRcdFx0aWYgKGJhc2tldCAhPT0gbnVsbCAmJiBiYXNrZXQgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHQvLyA8LS0tIFptaWFuYVxyXG5cdFx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcclxuXHRcdFx0XHRcdFx0Y29uc3QgY2xvc2VzdExpID0gdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGNsb3Nlc3RMaSk7XHJcblx0XHRcdFx0XHRcdGNsb3Nlc3RMaS5yZW1vdmUoKTtcclxuXHJcblx0XHRcdFx0XHRcdGNvbnN0IGFsbExpSW5CYXNrZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFza2V0LWl0ZW0nKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFsbExpSW5CYXNrZXQubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0YmFza2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdFx0XHRcdFx0bm90aWZpY2F0aW9uLmNsYXNzTGlzdC5hZGQoJ2Nsb3NlLW5vdGlmaWNhdGlvbicpO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93LW5vdGlmaWNhdGlvbicpO1xyXG5cdFx0XHRcdFx0XHRcdFx0bm90aWZpY2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NlLW5vdGlmaWNhdGlvbicpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDEwMDApO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRub3RpZmljYXRpb24udGV4dENvbnRlbnQgPSAnJztcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhbGxMaUluQmFza2V0Lmxlbmd0aCAhPT0gMCkge1xyXG5cdFx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IGFsbExpSW5CYXNrZXQubGVuZ3RoO1xyXG5cclxuXHRcdFx0XHRcdFx0XHRpZiAoYWxsTGlJbkJhc2tldC5sZW5ndGggPj0gMTApIHtcclxuXHRcdFx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9ICc5Kyc7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gYWRkVG9GYXZvcml0ZUJ0bi5mb3JFYWNoKChidG4sIGUpID0+IHtcclxuXHRcdFx0XHRcdC8vIFx0aWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZGVkLXRvLWZhdm9yaXRlJykpIHtcclxuXHRcdFx0XHRcdC8vIFx0XHRjb25zdCBhbGxQcm9kdWN0V2l0aEZhdiA9XHJcblx0XHRcdFx0XHQvLyBcdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYWRkZWQtdG8tZmF2Jyk7XHJcblx0XHRcdFx0XHQvLyBcdFx0YnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FkZGVkLXRvLWZhdm9yaXRlJyk7XHJcblx0XHRcdFx0XHQvLyBcdFx0Y29uc29sZS5sb2coYWxsUHJvZHVjdFdpdGhGYXYpO1xyXG5cdFx0XHRcdFx0Ly8gXHR9XHJcblx0XHRcdFx0XHQvLyB9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgY2xvc2VQcmljZUJveCA9ICgpID0+IHtcclxuXHRcdGlmIChwcmljZUJveC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1wcmljZS1ib3gnKSkge1xyXG5cdFx0XHRwcmljZUJveC5jbGFzc0xpc3QuYWRkKCdjbG9zZS1wcmljZS1ib3gnKTtcclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0cHJpY2VCb3guY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXByaWNlLWJveCcpO1xyXG5cdFx0XHRcdHByaWNlQm94LmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3NlLXByaWNlLWJveCcpO1xyXG5cdFx0XHR9LCA1MDApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNob3dQcmljZUJveCA9IChlKSA9PiB7XHJcblx0XHRjb25zdCBjbG9zZXN0TGkgPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xyXG5cdFx0Y29uc3QgaW1nID0gY2xvc2VzdExpLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpO1xyXG5cdFx0Y29uc3QgdGl0bGUgPSBjbG9zZXN0TGkucXVlcnlTZWxlY3RvcignLnRpdGxlJyk7XHJcblx0XHRjb25zdCBwcmljZSA9IGNsb3Nlc3RMaS5xdWVyeVNlbGVjdG9yKCcucHJpY2UnKTtcclxuXHJcblx0XHRwcmljZUJveC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtcHJpY2UtYm94Jyk7XHJcblxyXG5cdFx0Y29uc3QgaW1nU3JjID0gaW1nLnNyYztcclxuXHRcdGNvbnN0IHRpdGxlVGV4dCA9IHRpdGxlLnRleHRDb250ZW50O1xyXG5cdFx0Y29uc3QgaW1nQWx0ID0gaW1nLmFsdDtcclxuXHJcblx0XHRwcmljZUltZy5zcmMgPSBpbWdTcmM7XHJcblx0XHRwcmljZUltZy5hbHQgPSBpbWdBbHQ7XHJcblx0XHRpcGhvbmVOYW1lLnRleHRDb250ZW50ID0gdGl0bGVUZXh0O1xyXG5cdFx0bW9uZXkudGV4dENvbnRlbnQgPSBwcmljZS50ZXh0Q29udGVudDtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBjaGFuZ2VUaGVtZSA9ICgpID0+IHtcclxuXHRcdGlmIChib2R5LmdldEF0dHJpYnV0ZSgnZGF0YS1tb2RlJykgPT09ICdsaWdodCcpIHtcclxuXHRcdFx0Ym9keS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbW9kZScsICdkYXJrJyk7XHJcblx0XHRcdGNoYW5nZVRoZW1lQnRuLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1hY3RpdmUnKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGJvZHkuc2V0QXR0cmlidXRlKCdkYXRhLW1vZGUnLCAnbGlnaHQnKTtcclxuXHRcdFx0Y2hhbmdlVGhlbWVCdG4uY2xhc3NMaXN0LnJlbW92ZSgnc2xpZGVyLWFjdGl2ZScpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGFjdGl2ZVNlYXJjaCA9ICgpID0+IHtcclxuXHRcdGlmIChzZWFyY2gudmFsdWUgPT09ICcnIHx8IHNlYXJjaC52YWx1ZSAhPT0gJycpIHtcclxuXHRcdFx0c2VhcmNoLmNsYXNzTGlzdC5hZGQoJ3NlYXJjaC1hY3RpdmUnKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb25zdCBzZWFyY2hGdW5jdGlvdG4gPSAoZSkgPT4ge1xyXG5cdFx0ZW50ZXJDaGVjayhlKTtcclxuXHR9O1xyXG5cclxuXHRjb25zdCBlbnRlckNoZWNrID0gKGUpID0+IHtcclxuXHRcdGlmIChlLmtleUNvZGUgPT09IDEzKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdvaycpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IGJhc2tldE9mZlNlYXJjaCA9ICgpID0+IHtcclxuXHRcdGlmIChzZWFyY2guY2xhc3NMaXN0LmNvbnRhaW5zKCdzZWFyY2gtYWN0aXZlJykpIHtcclxuXHRcdFx0c2VhcmNoLmNsYXNzTGlzdC5yZW1vdmUoJ3NlYXJjaC1hY3RpdmUnKTtcclxuXHRcdFx0c2VhcmNoLmNsYXNzTGlzdC5hZGQoJ3NlYXJjaC1jbG9zZScpO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0c2VhcmNoLmNsYXNzTGlzdC5yZW1vdmUoJ3NlYXJjaC1jbG9zZScpO1xyXG5cdFx0XHR9LCA1MDApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHNpZGViYXJBY3RpdmUgPSAoKSA9PiB7XHJcblx0XHRzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ3NpZGViYXItYWN0aXZlJyk7XHJcblx0XHRpZiAoc2lkZWJhci5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGViYXItYWN0aXZlJykpIHtcclxuXHRcdFx0c2hvd01vcmVCb3guc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHRcdFx0YXJyb3cuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgxODBkZWcpJztcclxuXHRcdFx0Ly8gYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR0aGVtZVRleHQuc3R5bGUub3BhY2l0eSA9ICcxJztcclxuXHRcdFx0fSwgMzAwKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGFycm93LnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMGRlZyknO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRzaG93TW9yZUJveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0XHR9LCAzMDApO1xyXG5cclxuXHRcdFx0Ly8gYm9keS5zdHlsZS5vdmVyZmxvdyA9ICd2aXNpYmxlJztcclxuXHRcdFx0dGhlbWVUZXh0LnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcblx0XHR9XHJcblx0fTtcclxuXHQvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vXHJcblx0c2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgc2VhcmNoRW5naW5lKTtcclxuXHRzaG9wcGluZ0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3RpdmVCdXlXaW5kb3cpO1xyXG5cdGFkZEJhc2tldEJ0bi5mb3JFYWNoKChhZGRCdG4pID0+IHtcclxuXHRcdGFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGNvbnN0IGJhY2tMaSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdkb2Rhbm8gZG8ga29zenlrYScpO1xyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRiYWNrTGkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWluZm8tY2FyZCcpO1xyXG5cdFx0XHR9LCAxKTtcclxuXHJcblx0XHRcdGFkZEl0ZW1Ub0Jhc2tldChlKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRiYXNrZXRCb3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRiYXNrZXRCb3guY2xhc3NMaXN0LmFkZCgnYnV5LWJveC1hY3RpdmUnKTtcclxuXHR9KTtcclxuXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0aWYgKGJhc2tldEJveC5jbGFzc0xpc3QuY29udGFpbnMoJ2J1eS1ib3gtYWN0aXZlJykpIHtcclxuXHRcdFx0aWYgKCFlLnRhcmdldC5jbG9zZXN0KCcuY2xvc2UtaXRlbScpICYmICFiYXNrZXRCb3guY29udGFpbnMoZS50YXJnZXQpKSB7XHJcblx0XHRcdFx0YmFza2V0Qm94LmNsYXNzTGlzdC5yZW1vdmUoJ2J1eS1ib3gtYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYmFza2V0LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHtcclxuXHRcdFx0aWYgKCFiYXNrZXQuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcblx0XHRcdFx0YmFza2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoZmF2Qm94LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHtcclxuXHRcdFx0aWYgKCFmYXZCb3guY29udGFpbnMoZS50YXJnZXQpKSB7XHJcblx0XHRcdFx0ZmF2Qm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0YmFja0Fycm93LmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRjb25zdCBiYWNrTGkgPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xyXG5cdFx0XHRpZiAoYmFja0xpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlLWluZm8tY2FyZCcpKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRiYWNrTGkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWluZm8tY2FyZCcpO1xyXG5cdFx0XHRcdH0sIDEpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0Y2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVByaWNlQm94KTtcclxuXHRzaG93TW9yZUJ0bkNhcmQuZm9yRWFjaCgoYnRuKSA9PiB7XHJcblx0XHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93UHJpY2VCb3gpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBwcm9kdWN0cy5mb3JFYWNoKChwcm9kdWN0KSA9PiB7XHJcblx0Ly8gXHRwcm9kdWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHQvLyBcdFx0aWYgKGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUtaW5mby1jYXJkJykpIHtcclxuXHQvLyBcdFx0XHRyZXR1cm47XHJcblx0Ly8gXHRcdH0gZWxzZSB7XHJcblx0Ly8gXHRcdFx0cHJvZHVjdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtaW5mby1jYXJkJyk7XHJcblx0Ly8gXHRcdH1cclxuXHQvLyBcdFx0Ly8gcHJvZHVjdC5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUtaW5mby1jYXJkJyk7XHJcblx0Ly8gXHR9KTtcclxuXHQvLyB9KTtcclxuXHJcblx0cHJvZHVjdHMuZm9yRWFjaCgocHJvZHVjdCkgPT4ge1xyXG5cdFx0cHJvZHVjdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGlmIChlLnRhcmdldC5jbG9zZXN0KCdsaScpLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlLWluZm8tY2FyZCcpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHByb2R1Y3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLWluZm8tY2FyZCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0c2hvd0ZhdkJveEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNob3dGYXZCb3gpO1xyXG5cclxuXHRhZGRUb0Zhdm9yaXRlQnRuLmZvckVhY2goKGJ0bikgPT4ge1xyXG5cdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0Y29uc3QgYmFja0xpID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcclxuXHJcblx0XHRcdC8vIGlmIChiYWNrTGkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGRlZC10by1mYXYnKSkge1xyXG5cdFx0XHQvLyBcdHJldHVybjtcclxuXHRcdFx0Ly8gfVxyXG5cclxuXHRcdFx0aWYgKCFiYWNrTGkuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGRlZC10by1mYXYnKSkge1xyXG5cdFx0XHRcdGJhY2tMaS5jbGFzc0xpc3QuYWRkKCdhZGRlZC10by1mYXYnKTtcclxuXHRcdFx0XHRjb25zdCBjbG9zZXN0SW1nID0gYmFja0xpLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLnNyYztcclxuXHRcdFx0XHRjb25zdCBjbG9zZXN0QWx0ID0gYmFja0xpLnF1ZXJ5U2VsZWN0b3IoJ2ltZycpLmFsdDtcclxuXHRcdFx0XHRjb25zdCBjbG9zZXN0UHJpY2UgPSBiYWNrTGkucXVlcnlTZWxlY3RvcignLnByaWNlJykudGV4dENvbnRlbnQ7XHJcblx0XHRcdFx0Y29uc3QgY2xvc2VzdE5hbWUgPSBiYWNrTGkucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtbmFtZScpLnRleHRDb250ZW50O1xyXG5cdFx0XHRcdGNvbnN0IG5ld0ZhdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblx0XHRcdFx0bmV3RmF2LmNsYXNzTGlzdC5hZGQoJ2Zhdi1saScpO1xyXG5cclxuXHRcdFx0XHRuZXdGYXYuaW5uZXJIVE1MID0gYFxyXG5cdFx0XHQ8YnV0dG9uIGNsYXNzPVwiY2xvc2UtaXRlbVwiPjxpIGNsYXNzPVwiZmEtc29saWQgZmEteG1hcmtcIj48L2k+PC9idXR0b24+XHJcblx0ICAgIFx0XHQ8ZGl2IGNsYXNzPVwiZmF2LWltZy1ib3hcIj5cclxuXHQgICAgICAgXHRcdFx0PGltZyBzcmM9XCIke2Nsb3Nlc3RJbWd9XCIgYWx0PVwiJHtjbG9zZXN0QWx0fVwiIGNsYXNzPVwiZmF2LWltZ1wiPlxyXG5cclxuXHQgICAgICAgIFx0XHQ8aDMgY2xhc3M9XCJmYXYtdGl0bGVcIj4ke2Nsb3Nlc3ROYW1lfTwvaDM+XHJcblx0ICAgXHRcdFx0PC9kaXY+XHJcblxyXG5cdCAgICBcdFx0PGRpdiBjbGFzcz1cImZhdi1wcmljZS1ib3hcIj5cclxuXHQgICAgICAgICAgICAgXHQ8cCBjbGFzcz1cImZhdi1wcmljZVwiPiR7Y2xvc2VzdFByaWNlfTwvcD5cclxuXHQgICAgXHRcdDwvZGl2PlxyXG5cdFx0XHRgO1xyXG5cdFx0XHRcdGZhdkNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdGYXYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGFsbEZhdkxpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhdi1saScpO1xyXG5cdFx0XHRnZXRBbGxFbGVtZW50c0luRmF2KCk7XHJcblx0XHRcdGJ0bi5jbGFzc0xpc3QuYWRkKCdhZGRlZC10by1mYXZvcml0ZScpO1xyXG5cclxuXHRcdFx0aWYgKGFsbEZhdkxpLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdEb2RhaiBkbyB1bHViaW9ueWNoJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoYWxsRmF2TGkubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdGZhdk5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9IGFsbEZhdkxpLmxlbmd0aDtcclxuXHRcdFx0XHRmYXZOb3RpZmljYXRpb24uY2xhc3NMaXN0LmFkZCgnc2hvdy1ub3RpZmljYXRpb24nKTtcclxuXHRcdFx0XHRmYXZOb3RpZmljYXRpb24uY2xhc3NMaXN0LnJlbW92ZSgnY2xvc2Utbm90aWZpY2F0aW9uJyk7XHJcblxyXG5cdFx0XHRcdGlmIChhbGxGYXZMaS5sZW5ndGggPj0gMTApIHtcclxuXHRcdFx0XHRcdGZhdk5vdGlmaWNhdGlvbi50ZXh0Q29udGVudCA9ICcrOSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRiYWNrTGkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWluZm8tY2FyZCcpO1xyXG5cdFx0XHR9LCAxKTtcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGFuZ2VUaGVtZSk7XHJcblx0YWN0aXZlU2lkZWJhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNpZGViYXJBY3RpdmUpO1xyXG5cdG5hdkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGJhc2tldE9mZlNlYXJjaCk7XHJcblx0c2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgc2VhcmNoRnVuY3Rpb3RuKTtcclxuXHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhY3RpdmVTZWFyY2gpO1xyXG59KTtcclxuIl19
